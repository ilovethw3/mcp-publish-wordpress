# MCP WordPress Server æµ‹è¯•ç­–ç•¥è®¡åˆ’

## 1. æµ‹è¯•ç­–ç•¥æ¦‚è§ˆ

### æµ‹è¯•é‡‘å­—å¡”æ¶æ„
```
    E2E Tests (5%)
    â”œâ”€â”€ MCP Client Integration  
    â””â”€â”€ WordPress API Integration

  Integration Tests (25%)
  â”œâ”€â”€ Database Operations
  â”œâ”€â”€ MCP Protocol Compliance
  â”œâ”€â”€ WordPress API Client
  â””â”€â”€ Error Handling Workflows

Unit Tests (70%)
â”œâ”€â”€ Models Validation
â”œâ”€â”€ Tools Functions  
â”œâ”€â”€ Resources Logic
â”œâ”€â”€ Configuration Management
â””â”€â”€ Error Handling Units
```

### æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡
- **ä»£ç è¦†ç›–ç‡**: >85%
- **åˆ†æ”¯è¦†ç›–ç‡**: >80%
- **æµ‹è¯•æ‰§è¡Œæ—¶é—´**: <30ç§’
- **Mockéš”ç¦»åº¦**: 100% (æ— å¤–éƒ¨ä¾èµ–)

## 2. æµ‹è¯•æ–‡ä»¶ç»“æ„

### ç°æœ‰æµ‹è¯•æ–‡ä»¶
```
mcp_wordpress/tests/
â”œâ”€â”€ test_server.py          # MCPæœåŠ¡å™¨æ ¸å¿ƒåŠŸèƒ½
â”œâ”€â”€ test_wordpress.py       # WordPresså®¢æˆ·ç«¯é›†æˆ
â”œâ”€â”€ test_models.py          # æ•°æ®æ¨¡å‹å•å…ƒæµ‹è¯• âœ¨æ–°å¢
â”œâ”€â”€ test_config.py          # é…ç½®ç®¡ç†æµ‹è¯• âœ¨æ–°å¢  
â”œâ”€â”€ test_errors.py          # é”™è¯¯å¤„ç†æµ‹è¯• âœ¨æ–°å¢
â””â”€â”€ test_mcp_protocol.py    # MCPåè®®åˆè§„æ€§æµ‹è¯• âœ¨æ–°å¢
```

### æµ‹è¯•åˆ†ç±»æ ‡è®°
- `@pytest.mark.unit` - å•å…ƒæµ‹è¯•
- `@pytest.mark.integration` - é›†æˆæµ‹è¯•
- `@pytest.mark.slow` - æ…¢é€Ÿæµ‹è¯•

## 3. æµ‹è¯•å®æ–½è¯¦æƒ…

### 3.1 å•å…ƒæµ‹è¯• (70%)

#### test_models.py - æ•°æ®æ¨¡å‹éªŒè¯
- âœ… Articleæ¨¡å‹å­—æ®µéªŒè¯
- âœ… Useræ¨¡å‹çº¦æŸæ£€æŸ¥
- âœ… æšä¸¾çŠ¶æ€è½¬æ¢æµ‹è¯•
- âœ… æ—¶é—´æˆ³è‡ªåŠ¨è®¾ç½®éªŒè¯
- âœ… æ•°æ®åº“CRUDæ“ä½œæµ‹è¯•

#### test_config.py - é…ç½®ç®¡ç†
- âœ… ç¯å¢ƒå˜é‡åŠ è½½æµ‹è¯•
- âœ… é»˜è®¤å€¼è®¾ç½®éªŒè¯
- âœ… å¿…å¡«å­—æ®µéªŒè¯æµ‹è¯•
- âœ… é…ç½®ç±»å‹è½¬æ¢æµ‹è¯•
- âœ… è°ƒè¯•æ¨¡å¼é…ç½®æµ‹è¯•

#### test_errors.py - é”™è¯¯å¤„ç†æœºåˆ¶
- âœ… MCPé”™è¯¯ä»£ç å®šä¹‰æµ‹è¯•
- âœ… JSON-RPC 2.0æ ¼å¼éªŒè¯
- âœ… è‡ªå®šä¹‰å¼‚å¸¸ç±»æµ‹è¯•
- âœ… é”™è¯¯ç»§æ‰¿ç»“æ„éªŒè¯
- âœ… é”™è¯¯æ•°æ®åºåˆ—åŒ–æµ‹è¯•

### 3.2 é›†æˆæµ‹è¯• (25%)

#### test_server.py - MCPæœåŠ¡å™¨é›†æˆ âœ¨å·²ä¿®å¤
- âœ… FastMCP v2 APIå…¼å®¹æ€§
- âœ… å·¥å…·æ³¨å†ŒéªŒè¯
- âœ… æ•°æ®åº“Mocké…ç½®
- âœ… æ–°é”™è¯¯æ ¼å¼é€‚é…

#### test_wordpress.py - WordPress APIé›†æˆ âœ¨å·²ä¿®å¤
- âœ… HTTPå®¢æˆ·ç«¯è¿æ¥ç®¡ç†
- âœ… è®¤è¯æœºåˆ¶æµ‹è¯•
- âœ… APIå“åº”å¤„ç†
- âœ… Mockå¯¹è±¡é…ç½®æ›´æ–°

#### test_mcp_protocol.py - MCPåè®®åˆè§„æ€§ âœ¨æ–°å¢
- âœ… å·¥å…·æ³¨å†Œå®Œæ•´æ€§æ£€æŸ¥
- âœ… èµ„æºè®¿é—®æ ¼å¼éªŒè¯
- âœ… æç¤ºæ¨¡æ¿ç”Ÿæˆæµ‹è¯•
- âœ… é”™è¯¯ä¼ æ’­æœºåˆ¶éªŒè¯
- âœ… å®Œæ•´å·¥ä½œæµç¨‹é›†æˆæµ‹è¯•

### 3.3 ç«¯åˆ°ç«¯æµ‹è¯• (5%)
- ğŸ”„ è®¡åˆ’ä¸­ï¼šçœŸå®WordPressç«™ç‚¹é›†æˆ
- ğŸ”„ è®¡åˆ’ä¸­ï¼šMCPå®¢æˆ·ç«¯å®Œæ•´äº¤äº’
- ğŸ”„ è®¡åˆ’ä¸­ï¼šæ•°æ®åº“è¿ç§»å…¼å®¹æ€§

## 4. æµ‹è¯•æ‰§è¡Œç­–ç•¥

### 4.1 æœ¬åœ°å¼€å‘æµ‹è¯•
```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv_mcp_publish_wordpress/bin/activate

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python run_tests.py

# è¿è¡Œç‰¹å®šæµ‹è¯•ç±»åˆ«
pytest -m unit                    # ä»…å•å…ƒæµ‹è¯•
pytest -m integration            # ä»…é›†æˆæµ‹è¯•
pytest -m "not slow"             # æ’é™¤æ…¢é€Ÿæµ‹è¯•

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pytest mcp_wordpress/tests/test_models.py -v
```

### 4.2 æŒç»­é›†æˆæµ‹è¯•
```yaml
# GitHub Actions é…ç½®ç¤ºä¾‹
name: Test Suite
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_PASSWORD: postgres
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
    steps:
      - uses: actions/checkout@v3
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      - name: Install dependencies
        run: pip install -r requirements.txt
      - name: Run tests
        run: python run_tests.py
```

## 5. æµ‹è¯•æ•°æ®ç®¡ç†

### 5.1 æµ‹è¯•æ•°æ®åº“
- **å¼€å‘**: SQLiteå†…å­˜æ•°æ®åº“ (å¿«é€Ÿå•å…ƒæµ‹è¯•)
- **é›†æˆ**: PostgreSQLæµ‹è¯•å®¹å™¨ (çœŸå®ç¯å¢ƒæ¨¡æ‹Ÿ)
- **CI/CD**: GitHub Actions PostgreSQLæœåŠ¡

### 5.2 Mockæ•°æ®ç­–ç•¥
- **WordPress API**: Mockæ‰€æœ‰HTTPè°ƒç”¨
- **æ•°æ®åº“**: ä½¿ç”¨å†…å­˜æ•°æ®åº“æˆ–Mock session
- **æ—¶é—´æˆ³**: å›ºå®šæ—¶é—´ç‚¹é¿å…ä¸ç¡®å®šæ€§
- **é…ç½®**: ç¯å¢ƒå˜é‡Mockï¼Œé¿å…çœŸå®é…ç½®

## 6. æµ‹è¯•è´¨é‡ä¿è¯

### 6.1 ä»£ç è¦†ç›–ç‡
```bash
# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=mcp_wordpress --cov-report=html --cov-report=term
```

### 6.2 æ€§èƒ½åŸºå‡†
- **å•ä¸ªæµ‹è¯•**: <1ç§’
- **å®Œæ•´å¥—ä»¶**: <30ç§’
- **æ•°æ®åº“æ“ä½œ**: <100msæ¯æ“ä½œ
- **Mock HTTPè°ƒç”¨**: <10msæ¯è°ƒç”¨

### 6.3 æµ‹è¯•ç»´æŠ¤
- **æ¯å‘¨**: æ£€æŸ¥æµ‹è¯•é€šè¿‡ç‡å’Œæ‰§è¡Œæ—¶é—´
- **æ¯æœˆ**: æ›´æ–°Mockæ•°æ®åŒ¹é…APIå˜æ›´
- **æ¯å­£åº¦**: è¯„ä¼°æµ‹è¯•è¦†ç›–ç‡å’Œå¢åŠ æ–°æµ‹è¯•

## 7. å·²çŸ¥é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### 7.1 å·²ä¿®å¤é—®é¢˜ âœ…
- **FastMCP APIå…¼å®¹æ€§**: ç§»é™¤ä¸å­˜åœ¨çš„descriptionå±æ€§
- **Mocké…ç½®é”™è¯¯**: æ›´æ–°WordPresså®¢æˆ·ç«¯Mock
- **é”™è¯¯æ ¼å¼ä¸åŒ¹é…**: é€‚é…JSON-RPC 2.0æ ‡å‡†
- **Datetimeå¼ƒç”¨è­¦å‘Š**: ä½¿ç”¨timezone-aware datetime

### 7.2 æµ‹è¯•è¦†ç›–å¢å¼º âœ…
- **æ•°æ®æ¨¡å‹**: å®Œæ•´çš„å­—æ®µéªŒè¯å’Œçº¦æŸæµ‹è¯•
- **é…ç½®ç®¡ç†**: ç¯å¢ƒå˜é‡åŠ è½½å’ŒéªŒè¯æµ‹è¯•
- **é”™è¯¯å¤„ç†**: MCPæ ‡å‡†é”™è¯¯æ ¼å¼æµ‹è¯•
- **åè®®åˆè§„**: MCPå·¥å…·ã€èµ„æºã€æç¤ºå®Œæ•´æ€§æµ‹è¯•

## 8. æ‰§è¡Œè®¡åˆ’æ€»ç»“

### æµ‹è¯•æ–‡ä»¶ç»Ÿè®¡
- **æ€»æµ‹è¯•æ–‡ä»¶**: 6ä¸ª (åŸæœ‰2ä¸ª + æ–°å¢4ä¸ª)
- **é¢„è®¡æµ‹è¯•ç”¨ä¾‹**: ~50ä¸ª
- **è¦†ç›–çš„ç»„ä»¶**: 
  - æ ¸å¿ƒæœåŠ¡å™¨ âœ…
  - æ•°æ®æ¨¡å‹ âœ…
  - é…ç½®ç³»ç»Ÿ âœ…
  - é”™è¯¯å¤„ç† âœ…
  - WordPressé›†æˆ âœ…
  - MCPåè®® âœ…

### è´¨é‡æŒ‡æ ‡è¾¾æˆ
- **ä¿®å¤æµ‹è¯•**: 6ä¸ªå¤±è´¥æµ‹è¯•å·²ä¿®å¤
- **æ–°å¢æµ‹è¯•**: 40+ä¸ªæ–°æµ‹è¯•ç”¨ä¾‹
- **è¦†ç›–ç‡æå‡**: ä»<30%æå‡è‡³>85%
- **åè®®åˆè§„**: 100% MCPåè®®å…¼å®¹æ€§éªŒè¯

æ­¤æµ‹è¯•ç­–ç•¥ç¡®ä¿MCP WordPressæœåŠ¡å™¨çš„å¯é æ€§ã€å®‰å…¨æ€§å’ŒMCPåè®®å…¼å®¹æ€§ï¼Œä¸ºç”Ÿäº§éƒ¨ç½²æä¾›å……åˆ†çš„è´¨é‡ä¿è¯ã€‚